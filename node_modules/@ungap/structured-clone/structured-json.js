var StructuredJSON=function(e){"use strict";const t="object"==typeof self?self:globalThis,r=e=>((e,r)=>{const s=(t,r)=>(e.set(r,t),t),n=c=>{if(e.has(c))return e.get(c);const[o,a]=r[c];switch(o){case 0:return s(a,c);case 1:{const e=s([],c);for(const t of a)e.push(n(t));return e}case 2:{const e=s({},c);for(const[t,r]of a)e[n(t)]=n(r);return e}case 3:return s(new Date(a),c);case 4:{const{source:e,flags:t}=a;return s(new RegExp(e,t),c)}case 5:{const e=s(new Map,c);for(const[t,r]of a)e.set(n(t),n(r));return e}case 6:{const e=s(new Set,c);for(const t of a)e.add(n(t));return e}case 7:{const{name:e,message:r}=a;return s(new t[e](r),c)}case 8:return s(BigInt(a),c);case"BigInt":return s(Object(BigInt(a)),c)}return s(new t[o](a),c)};return n})(new Map,e)(0),s="",{toString:n}={},{keys:c}=Object,o=e=>{const t=typeof e;if("object"!==t||!e)return[0,t];const r=n.call(e).slice(8,-1);switch(r){case"Array":return[1,s];case"Object":return[2,s];case"Date":return[3,s];case"RegExp":return[4,s];case"Map":return[5,s];case"Set":return[6,s]}return r.includes("Array")?[1,r]:r.includes("Error")?[7,r]:[2,r]},a=([e,t])=>0===e&&("function"===t||"symbol"===t),u=(e,{json:t,lossy:r}={})=>{const s=[];return((e,t,r,s)=>{const n=(e,t)=>{const n=s.push(e)-1;return r.set(t,n),n},u=s=>{if(r.has(s))return r.get(s);let[i,f]=o(s);switch(i){case 0:{let t=s;switch(f){case"bigint":i=8,t=s.toString();break;case"function":case"symbol":if(e)throw new TypeError("unable to serialize "+f);t=null}return n([i,t],s)}case 1:{if(f)return n([f,[...s]],s);const e=[],t=n([i,e],s);for(const t of s)e.push(u(t));return t}case 2:{if(f)switch(f){case"BigInt":return n([f,s.toString()],s);case"Boolean":case"Number":case"String":return n([f,s.valueOf()],s)}if(t&&"toJSON"in s)return u(s.toJSON());const r=[],l=n([i,r],s);for(const t of c(s))!e&&a(o(s[t]))||r.push([u(t),u(s[t])]);return l}case 3:return n([i,s.toISOString()],s);case 4:{const{source:e,flags:t}=s;return n([i,{source:e,flags:t}],s)}case 5:{const t=[],r=n([i,t],s);for(const[r,n]of s)(e||!a(o(r))&&!a(o(n)))&&t.push([u(r),u(n)]);return r}case 6:{const t=[],r=n([i,t],s);for(const r of s)!e&&a(o(r))||t.push(u(r));return r}}const{message:l}=s;return n([i,{name:f,message:l}],s)};return u})(!(t||r),!!t,new Map,s)(e),s},{parse:i,stringify:f}=JSON,l={json:!0,lossy:!0};return e.parse=e=>r(i(e)),e.stringify=e=>f(u(e,l)),e}({});
